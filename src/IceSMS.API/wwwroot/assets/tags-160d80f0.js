import{r as d,j as e}from"./index-408549ef.js";import{u as j,a as f,g as k,b as y,c as S,T as w,d as T,e as c,f as C,h as g,i as P,j as R,D as N}from"./data-table-pagination-74889f99.js";import{A,S as h,a as m}from"./app-layout-10f771d5.js";import{B as p}from"./input-5d80ed27.js";import{u as D,P as v,S as E,F as K,B as L}from"./BulkAddSheet-a1c233ff.js";import"./utils-b13f04d9.js";import"./createLucideIcon-ccf82dc6.js";const M=[{accessorKey:"phone",header:"Telefon Numarası"},{accessorKey:"tenant_id",header:"Tenant ID"},{accessorKey:"CreatedAt",header:"Eklenme Tarihi",cell:({row:r})=>new Date(r.getValue("CreatedAt")).toLocaleDateString()},{accessorKey:"UpdatedAt",header:"Güncelleme Tarihi",cell:({row:r})=>new Date(r.getValue("UpdatedAt")).toLocaleDateString()}];function q(){const[r,u]=d.useState([]),[o,x]=d.useState({pageIndex:0,pageSize:10}),{data:s,isLoading:B}=j({queryKey:["blacklist",o],queryFn:async()=>{var l;const a=(l=document.cookie.split("; ").find(b=>b.startsWith("authToken=")))==null?void 0:l.split("=")[1];if(!a)throw new Error("Yetkilendirme hatası");const t=new URLSearchParams({page:(o.pageIndex+1).toString(),limit:o.pageSize.toString()}),i=await fetch(`/api/protected/blacklist/get?${t}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error("API hatası");return i.json()},placeholderData:a=>a}),n=f({data:(s==null?void 0:s.data)||[],columns:M,pageCount:(s==null?void 0:s.total_page)||-1,state:{pagination:o,sorting:r},onPaginationChange:x,onSortingChange:u,manualPagination:!0,getCoreRowModel:k(),getPaginationRowModel:y(),getSortedRowModel:S()});return D(),e.jsxs(A,{title:"Kara Liste Yönetimi Sayfası",breadcrumbs:[{title:"Kara Liste Yönetimi",href:"/phonebook/blacklist"}],children:[e.jsxs("div",{className:"flex justify-end gap-2 mb-4",children:[e.jsxs(h,{children:[e.jsx(m,{asChild:!0,children:e.jsxs(p,{variant:"outline",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Tekli Ekle"]})}),e.jsx(E,{})]}),e.jsxs(h,{children:[e.jsx(m,{asChild:!0,children:e.jsxs(p,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Toplu Ekle"]})}),e.jsx(L,{})]})]}),e.jsx("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:e.jsxs("div",{className:"rounded-md border bg-white shadow-sm dark:border-gray-700 dark:bg-gray-900",children:[e.jsxs(w,{children:[e.jsx(T,{children:n.getHeaderGroups().map(a=>e.jsx(c,{className:"dark:hover:bg-gray-800",children:a.headers.map(t=>e.jsx(C,{className:"dark:text-gray-200",children:g(t.column.columnDef.header,t.getContext())},t.id))},a.id))}),e.jsx(P,{children:n.getRowModel().rows.map(a=>e.jsx(c,{className:"dark:border-gray-700 dark:hover:bg-gray-800",children:a.getVisibleCells().map(t=>e.jsx(R,{className:"dark:text-gray-300",children:g(t.column.columnDef.cell,t.getContext())},t.id))},a.id))})]}),e.jsx(N,{table:n})]})})]})}export{q as default};
